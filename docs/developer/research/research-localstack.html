<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer/research/research-localstack">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Localstack Research Notes | Operational Recovery Cloud Archive (ORCA)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nasa.github.io//cumulus-orca/docs/developer/research/research-localstack"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Localstack Research Notes | Operational Recovery Cloud Archive (ORCA)"><meta data-rh="true" name="description" content="Research Notes on Localstack."><meta data-rh="true" property="og:description" content="Research Notes on Localstack."><link data-rh="true" rel="icon" href="/cumulus-orca/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nasa.github.io//cumulus-orca/docs/developer/research/research-localstack"><link data-rh="true" rel="alternate" href="https://nasa.github.io//cumulus-orca/docs/developer/research/research-localstack" hreflang="en"><link data-rh="true" rel="alternate" href="https://nasa.github.io//cumulus-orca/docs/developer/research/research-localstack" hreflang="x-default"><link rel="stylesheet" href="/cumulus-orca/assets/css/styles.8acaa92e.css">
<link rel="preload" href="/cumulus-orca/assets/js/runtime~main.92d34172.js" as="script">
<link rel="preload" href="/cumulus-orca/assets/js/main.106c8a82.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cumulus-orca/"><div class="navbar__logo"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Operational Recovery Cloud Archive (ORCA)</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Guide</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/operator/operator-intro">Operator Guide</a><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/development-guide/code/contrib-code-intro">Development Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/deployment-guide/deployment">Deployment Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/api/orca-api">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cumulus-orca/docs/developer/research/research-intro">Research</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-intro">Introduction to ORCA Research</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cumulus-orca/docs/developer/research/research-localstack">Localstack Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-APIGateway">API Gateway Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-reconciliation">ORCA Reconciliation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-AuroraServerless">Aurora Serverless Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-graphql">GraphQL Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-multipart-chunksize">Multipart Chunksize Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-bamboo">Bamboo specs Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-lambda-container">Using Lambda functions as container research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-orca-delete-functionality">Research Notes on ORCA delete functionality.</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-bamboo-integration-tests">Research Notes on running integration tests in bamboo CI/CD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-lambda-container">Using Lambda functions as container research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-pushing-docker-image">Notes on pushing and deploying docker images.</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-s3-bucket-best-practices">S3 Future Direction/Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-deep-archive-migration">Deep Archive Storage Migration Research Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-logging-libraries">Logging Libraries Research Notes</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cumulus-orca/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Research</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Localstack Research Notes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Localstack Research Notes</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p><a href="https://github.com/localstack/localstack" target="_blank" rel="noopener noreferrer">Localstack</a> is a method of simulating an AWS environment locally.
This can be used to bypass the requirement of a remote sandbox environment, making testing easier.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-details">Implementation Details<a class="hash-link" href="#implementation-details" title="Direct link to heading">​</a></h3><ul><li>Some features and not present, and some are locked behind the <a href="https://localstack.cloud/#pricing" target="_blank" rel="noopener noreferrer">Pro Version</a>.<ul><li>RDS is not present, but testing can be done with a local database.</li></ul></li><li>Can be run in a Docker container using Docker Compose.</li><li>Can be run directly via a docker command.<div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run --rm -p 4566:4566 -p 4571:4571 localstack/localstack</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Docker&#x27;s localhost can be accessed on the parent machine at <a href="http://host.docker.internal" target="_blank" rel="noopener noreferrer">http://host.docker.internal</a></p></div></div></li><li>Most services are accessible on port 4566, and starting the image lists them individually.</li><li>Data is not persisted between runs of the image.<ul><li>S3 Bucket contents can be preserved by adding the following to <a href="https://git.cr.usgs.gov/LPDA/appeears/-/blob/feature/rds-setup/deployment/localstack/docker-compose.yaml" target="_blank" rel="noopener noreferrer">docker-compose.yaml</a><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">DATA_DIR=/tmp/localstack/data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">volumes: localstack-col:/tmp/localstack</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li>There currently is no page for services running in localstack.<div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p><a href="https://www.getcommandeer.com" target="_blank" rel="noopener noreferrer">Commandeer</a> could theoretically be used to provide a UI, but make sure it is approved by IT.</p></div></div></li><li><a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a> and <a href="https://github.com/boto/botocore" target="_blank" rel="noopener noreferrer">botocore3</a> can both contact Localstack if properly <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html" target="_blank" rel="noopener noreferrer">configured</a>.<ul><li>AWS credentials are not checked, and can therefore be dummy values.</li><li>Most commands work, including those for creating, modifying, and listing services. For example:<ul><li>Localstack In Docker:</li></ul><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws --endpoint-url=http://host.docker.internal:4566 s3 ls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Localstack Running Locally:</li></ul><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws --endpoint-url=http://localhost:4566 s3 ls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Presently we are unsure if an AWS CLI profile pointing to Localstack precludes the need for &#x27;--endpoint-url&#x27;.</li></ul></li><li><a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform</a> can be used to deploy to Localstack.<ul><li>Since credentials are not checked, &#x27;access_key&#x27; and &#x27;secret_key&#x27; can be dummy values.</li><li>Since full permissions are granted be default, &#x27;lambda-vpc-role&#x27; can also be a dummy value.</li><li>Terraform must be informed of Localstack&#x27;s ports for services.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">provider &quot;aws&quot;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  endpoints {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s3 = &quot;http://host.docker.internal:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a href="https://git.cr.usgs.gov/LPDA/appeears/-/blob/feature/rds-setup/deployment/terraform/dev/main.tf" target="_blank" rel="noopener noreferrer">Full example here.</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-details">Setup details<a class="hash-link" href="#setup-details" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Make sure you have Docker desktop installed in your laptop and approved by your local IT and security team.</p></div></div><ul><li>There are two ways to install localstack- either directly using docker command or by running a docker-compose.yaml file. The recommended way is by using docker compose since all changes will stay in one config file that can be changed according to use cases.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose">Docker compose<a class="hash-link" href="#docker-compose" title="Direct link to heading">​</a></h4><p>A sample docker-compose.yml file is shown below: </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3.8&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">localstack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">container_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> localstack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> localstack/localstack</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;53:53&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;443:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4566:4566&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4571:4571&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> DEBUG=1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> DATA_DIR=/tmp/localstack/data </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Local directory for saving persistent data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> DEFAULT_REGION=us</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">east</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> LAMBDA_EXECUTOR=local </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#running lambda from local dir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> LAMBDA_REMOTE_DOCKER=0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> DOCKER_HOST=unix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">///var/run/docker.sock</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> HOST_TMP_FOLDER=/tmp/localstack</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the command line, run <code>docker compose up</code> from within the directory containing the docker-compose.yml file shown above to start localstack.</p><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    C:\Users\test\localstack-test&gt;docker compose up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [+] Running 2/1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - Network localstack-test_default  Created                                                                                                                                                                   0.0s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - Container localstack-container   Created                                                                                                                                                                   0.1s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Attaching to localstack-container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Waiting for all LocalStack services to be ready</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:27,632 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:27,635 INFO supervisord started with pid 14</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:28,638 INFO spawned: &#x27;dashboard&#x27; with pid 20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:28,640 INFO spawned: &#x27;infra&#x27; with pid 21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:28,645 INFO success: dashboard entered RUNNING state, process has stayed up for &gt; than 0 seconds (startsecs)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:28,645 INFO exited: dashboard (exit status 0; expected)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | (. .venv/bin/activate; exec bin/localstack start --host)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting local dev environment. CTRL-C to quit.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:30,317 INFO success: infra entered RUNNING state, process has stayed up for &gt; than 1 seconds (startsecs)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | LocalStack version: 0.12.12</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | LocalStack build date: 2021-06-15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | LocalStack build git hash: 48ac6ea8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16T16:40:33:DEBUG:bootstrap.py: Loading plugins - scope &quot;services&quot;, module &quot;localstack&quot;: &lt;function register_localstack_plugins at 0x7fd684268050&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting edge router (https port 4566)...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock ACM service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16T16:40:33:INFO:localstack.multiserver: Starting multi API server process on port 36131</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | [2021-06-16 16:40:33 +0000] [22] [INFO] Running on https://0.0.0.0:4566 (CTRL + C to quit)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16T16:40:33:INFO:hypercorn.error: Running on https://0.0.0.0:4566 (CTRL + C to quit)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | [2021-06-16 16:40:33 +0000] [22] [INFO] Running on http://0.0.0.0:36131 (CTRL + C to quit)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16T16:40:33:INFO:hypercorn.error: Running on http://0.0.0.0:36131 (CTRL + C to quit)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Waiting for all LocalStack services to be ready</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock API Gateway service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock CloudFormation service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock CloudWatch service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock DynamoDB service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock DynamoDB Streams service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock EC2 service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock ES service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock Firehose service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock IAM service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock STS service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock Kinesis service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Initializing DynamoDB Local with the following configuration:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Port:   52091</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | InMemory:       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | DbPath: /tmp/localstack/data/dynamodb</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | SharedDb:       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | shouldDelayTransientStatuses:   false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | CorsParams:     *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock KMS service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | INFO[2021-06-16 16:40:34.915] Local KMS 3.9.1 (4e5eb289efb23f9059ae4b1f9896bad6c9a499f2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | INFO[2021-06-16 16:40:34.936] No file found at path /init/seed.yaml; skipping seeding.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | INFO[2021-06-16 16:40:34.937] Data will be stored in /tmp/localstack/data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | INFO[2021-06-16 16:40:34.937] Local KMS started on 0.0.0.0:42519</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Listening at http://:::40789</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:34,603:API:  * Running on all addresses.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  |    WARNING: This is a development server. Do not use it in a production deployment.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | 2021-06-16 16:40:34,603:API:  * Running on http://172.21.0.2:39023/ (Press CTRL+C to quit)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock Lambda service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock CloudWatch Logs service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock Redshift service on http port 4566 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    localstack-container  | Starting mock Route53 service on http port 4566 ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Localstack is now running in docker. To verify that the services are running, check the link http://localhost:4566/ should show a status of &quot;running&quot;.
Open the docker desktop and click on the container&#x27;s CLI to open the container.
Install the AWS CLI to run CLI commands in the docker container.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p><code>awslocal</code> is a thin wrapper around the AWS CLI for use with LocalStack. This
prevents the need for specifying <code>--endpoint-url</code> every-time the AWS CLI
command is run. To install <code>awslocal</code>, run:
<code>pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org awscli-local</code></p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-of-aws-services-deployed-using-localstack">Examples of AWS services deployed using localstack<a class="hash-link" href="#examples-of-aws-services-deployed-using-localstack" title="Direct link to heading">​</a></h3><p>Some examples of CLI commands and their corresponding outputs are shown below.</p><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create the api gateway called test-api</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">C:\Users\test\localstack-test&gt; awslocal apigateway create-rest-api --name test-api</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;id&quot;: &quot;0zqyew47ie&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;test-api&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;createdDate&quot;: 1623862127,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;version&quot;: &quot;V1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;binaryMediaTypes&quot;: [],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;apiKeySource&quot;: &quot;HEADER&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;endpointConfiguration&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;types&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;EDGE&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;tags&quot;: {},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;disableExecuteApiEndpoint&quot;: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get the parent resource id to create an api gateway resource using the api gateway id from above</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">C:\Users\test\localstack-test&gt; PARENT_RESOURCE_ID=$(awslocal apigateway get-resources --rest-api-id 0zqyew47ie --query &#x27;items[?path==`/`].id&#x27; --output text)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create an API resource Gateway</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">C:\Users\test\localstack-test&gt; awslocal apigateway create-resource --rest-api-id 0zqyew47ie --parent-id $PARENT_RESOURCE_ID --path-part &quot;{test}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;7z17qim7fw&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;parentId&quot;: &quot;d22pls3twh&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;pathPart&quot;: &quot;{test}&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;path&quot;: &quot;/{test}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-function">Lambda function<a class="hash-link" href="#lambda-function" title="Direct link to heading">​</a></h4><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create a lambda function named test-function</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  C:\Users\test\localstack-test&gt; awslocal lambda create-function --function-name test-function --runtime python3.7 --zip-file fileb://test.zip --handler test.lambda_handler --role test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;FunctionName&quot;: &quot;test-function&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;FunctionArn&quot;: &quot;arn:aws:lambda:us-east-1:000000000000:function:test-function&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Runtime&quot;: &quot;python3.7&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Role&quot;: &quot;test&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Handler&quot;: &quot;test.lambda_handler&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;CodeSize&quot;: 217,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Description&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Timeout&quot;: 3,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;LastModified&quot;: &quot;2021-06-16T18:32:27.753+0000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;CodeSha256&quot;: &quot;TxccBpGFdCdDKjbXygowwHMdUE0yPX+1U2eu6Vd+rsk=&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Version&quot;: &quot;$LATEST&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;VpcConfig&quot;: {},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;TracingConfig&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;Mode&quot;: &quot;PassThrough&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;RevisionId&quot;: &quot;fb286270-3b68-4cae-9237-8efac356bee3&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;State&quot;: &quot;Active&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;LastUpdateStatus&quot;: &quot;Successful&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;PackageType&quot;: &quot;Zip&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sqs">SQS<a class="hash-link" href="#sqs" title="Direct link to heading">​</a></h4><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # Create an SQS queue named test-queue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  C:\Users\test\localstack-test&gt; awslocal sqs create-queue --queue-name test-queue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;QueueUrl&quot;: &quot;http://localhost:4566/000000000000/test-queue&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # Send a message to the SQS created above.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  C:\Users\test\localstack-test&gt; awslocal sqs send-message --queue-url http://localhost:4566/000000000000/test-queue --message-body &quot;test message.&quot; --delay-seconds 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;MD5OfMessageBody&quot;: &quot;5cbd04aaf0430ff7fac38ebd11b72083&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;MessageId&quot;: &quot;0d4d8a75-276d-9687-6604-975cc0a84c68&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # Receive the sent message from the SQS.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  C:\Users\test\localstack-test&gt; awslocal sqs receive-message --queue-url http://localhost:4566/000000000000/test-queue --attribute-names All --message-attribute-names All</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Messages&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;MessageId&quot;: &quot;0d4d8a75-276d-9687-6604-975cc0a84c68&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;ReceiptHandle&quot;: &quot;ljwfjwrrlolejmrqcqbsrrxajygjsbkleesnyxtvwlffoikfstreipeutydtzhxosvjicazswakagyfhcxbrbpxxofkzsdbgjlofnpbmfxxtztrsmjkhkecfbqvdxnyotoujibxdavaiewtthscexnvplkmfrryisowurnxrymfzvyozubidbhsms&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;MD5OfBody&quot;: &quot;5cbd04aaf0430ff7fac38ebd11b72083&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;Body&quot;: &quot;test message.&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;Attributes&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;SenderId&quot;: &quot;AIDAIT2UOQQY3AUEKVGXU&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;SentTimestamp&quot;: &quot;1623871655817&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;ApproximateReceiveCount&quot;: &quot;1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;ApproximateFirstReceiveTimestamp&quot;: &quot;1623871770221&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="secrets-manager">Secrets manager<a class="hash-link" href="#secrets-manager" title="Direct link to heading">​</a></h4><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Create a secret named localstack-secret in secrets manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    C:\Users\test\localstack-test&gt; awslocal secretsmanager create-secret --name localstack-secret</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Response: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ARN&quot;: &quot;arn:aws:secretsmanager:us-east-1:000000000000:secret:localstack-secret-PAnuzB&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Name&quot;: &quot;localstack-secret&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;VersionId&quot;: &quot;8c6c77a1-6400-441a-b8f7-730abec4b9d5&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-aws-resources-using-terraform-and-localstack">Deploying AWS resources using terraform and localstack<a class="hash-link" href="#deploying-aws-resources-using-terraform-and-localstack" title="Direct link to heading">​</a></h3><p>Terraform can also be used to deploy and test AWS resources locally using localstack. Make sure to have Terraform installed on your local machine. An example of deploying services like lambda, API gateway, SQS, S3 and SNS is shown below:</p><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    provider &quot;aws&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      region = &quot;us-east-1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      access_key = &quot;123&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      secret_key = &quot;xyz&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      skip_credentials_validation = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      skip_requesting_account_id = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      skip_metadata_api_check = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      s3_force_path_style = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      endpoints {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        s3 = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        sqs = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        apigateway = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        lambda = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        sns = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        secretsmanager = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        iam = &quot;http://localhost:4566&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #-------------------------------- resources-------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_s3_bucket&quot; &quot;localstack-test-bucket&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      bucket = &quot;localstack-test-bucket&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_sqs_queue&quot; &quot;localstack-test-sqs&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name                      = &quot;localstack-test-sqs&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      tags = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Environment = &quot;dev&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_api_gateway_rest_api&quot; &quot;localstack-rest-api&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name = &quot;localstack-rest-api&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_api_gateway_resource&quot; &quot;localstack-rest-api-resource&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      parent_id   = aws_api_gateway_rest_api.localstack-rest-api.root_resource_id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      path_part   = &quot;test&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      rest_api_id = aws_api_gateway_rest_api.localstack-rest-api.id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_lambda_function&quot; &quot;test_lambda&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      filename      = &quot;test.zip&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      function_name = &quot;localstack-lambda&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      role          = aws_iam_role.localstack-role.arn</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      handler       = &quot;test.lambda_handler&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      source_code_hash = filebase64sha256(&quot;test.zip&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      runtime = &quot;python3.7&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_sns_topic&quot; &quot;localstack-sns-topic&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name = &quot;localstack-sns-topic&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_secretsmanager_secret&quot; &quot;localstack-secret&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name                    = &quot;localstack-secret&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      recovery_window_in_days = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    data &quot;aws_iam_policy_document&quot; &quot;localstack_policy&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      statement {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        actions   = [&quot;*&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        effect    = &quot;Allow&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource &quot;aws_iam_role&quot; &quot;localstack-role&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name               = &quot;localstack-role&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      assume_role_policy = data.aws_iam_policy_document.localstack_policy.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here is the output after running <code>terraform apply</code></p><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Output:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Plan: 6 to add, 0 to change, 0 to destroy.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Do you want to perform these actions?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Terraform will perform the actions described above.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Only &#x27;yes&#x27; will be accepted to approve.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Enter a value: yes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_api_gateway_rest_api.localstack-rest-api: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_secretsmanager_secret.localstack-secret: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_iam_role.localstack-role: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_sqs_queue.localstack-test-sqs: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_sns_topic.localstack-sns-topic: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_s3_bucket.localstack-test-bucket: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_sns_topic.localstack-sns-topic: Creation complete after 0s [id=arn:aws:sns:us-east-1:000000000000:localstack-sns-topic]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_api_gateway_rest_api.localstack-rest-api: Creation complete after 0s [id=kxg64u2jdv]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_api_gateway_resource.localstack-rest-api-resource: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_secretsmanager_secret.localstack-secret: Creation complete after 0s [id=arn:aws:secretsmanager:us-east-1:000000000000:secret:localstack-secret-iIRbKa]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_iam_role.localstack-role: Creation complete after 0s [id=localstack-role]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_sqs_queue.localstack-test-sqs: Creation complete after 0s [id=http://localhost:4566/000000000000/localstack-test-sqs]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_lambda_function.test_lambda: Creating...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_api_gateway_resource.localstack-rest-api-resource: Creation complete after 0s [id=b97isejc8z]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_s3_bucket.localstack-test-bucket: Creation complete after 0s [id=localstack-test-bucket]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    aws_lambda_function.test_lambda: Creation complete after 6s [id=localstack-lambda]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Apply complete! Resources: 8 added, 0 changed, 0 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-for-localstack">IDE for Localstack<a class="hash-link" href="#ide-for-localstack" title="Direct link to heading">​</a></h3><ul><li>Currently, there is an IDE named <a href="https://getcommandeer.com/" target="_blank" rel="noopener noreferrer">Commandeer</a> that can be used to maintain localstack environments but requires a licensed premium version of the software to use. This could be something to look into in the future if we plan to buy a premium version.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="known-limitations">Known Limitations<a class="hash-link" href="#known-limitations" title="Direct link to heading">​</a></h3><ul><li>While commonly used AWS services are present, some more uncommon services are not.</li><li>Is not a total replacement for AWS Sandbox testing.<ul><li>Security checks are not present.</li><li>Is, by its nature, a simulation.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="future-direction">Future Direction<a class="hash-link" href="#future-direction" title="Direct link to heading">​</a></h3><ul><li>Localstack in a Docker container would be an excellent place to deploy ORCA for local testing.</li><li>Could also be used for automated large testing in Bamboo if deployment scripting can be added.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sources">Sources<a class="hash-link" href="#sources" title="Direct link to heading">​</a></h4><ul><li>Meeting with Aafaque</li><li><a href="https://github.com/localstack/localstack" target="_blank" rel="noopener noreferrer">https://github.com/localstack/localstack</a></li><li><a href="https://git.cr.usgs.gov/LPDA/appeears/-/blob/feature/rds-setup/deployment/terraform/dev/main.tf" target="_blank" rel="noopener noreferrer">AppEEARS&#x27; Docker Implementation</a></li><li><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/guides/custom-service-endpoints" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/providers/hashicorp/aws/latest/docs/guides/custom-service-endpoints</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nasa/cumulus-orca/edit/develop/website/docs/developer/research/research-localstack.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cumulus-orca/docs/developer/research/research-intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction to ORCA Research</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cumulus-orca/docs/developer/research/research-APIGateway"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Gateway Research Notes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#implementation-details" class="table-of-contents__link toc-highlight">Implementation Details</a></li><li><a href="#setup-details" class="table-of-contents__link toc-highlight">Setup details</a></li><li><a href="#examples-of-aws-services-deployed-using-localstack" class="table-of-contents__link toc-highlight">Examples of AWS services deployed using localstack</a></li><li><a href="#deploying-aws-resources-using-terraform-and-localstack" class="table-of-contents__link toc-highlight">Deploying AWS resources using terraform and localstack</a></li><li><a href="#ide-for-localstack" class="table-of-contents__link toc-highlight">IDE for Localstack</a></li><li><a href="#known-limitations" class="table-of-contents__link toc-highlight">Known Limitations</a></li><li><a href="#future-direction" class="table-of-contents__link toc-highlight">Future Direction</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/developer/quickstart/developer-intro">ORCA Developer Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/operator/operator-intro">ORCA Operator Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/ORCA+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">ORCA Working Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/nasa/cumulus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Integrators+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Integrator Working Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Operator+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Operator Working Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://nasa.github.io/cumulus/docs/cumulus-docs-readme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/cumulus-orca/assets/js/runtime~main.92d34172.js"></script>
<script src="/cumulus-orca/assets/js/main.106c8a82.js"></script>
</body>
</html>