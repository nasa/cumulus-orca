"use strict";(self.webpackChunkorca_website=self.webpackChunkorca_website||[]).push([[6470],{3617:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>d,toc:()=>a});var n=t(4848),o=t(8453);const r={id:"postgres-tests",title:"Postgres Tests",description:"Instructions on running 'postgres' tests."},i=void 0,d={id:"developer/development-guide/code/postgres-tests",title:"Postgres Tests",description:"Instructions on running 'postgres' tests.",source:"@site/docs/developer/development-guide/code/postgres-tests.md",sourceDirName:"developer/development-guide/code",slug:"/developer/development-guide/code/postgres-tests",permalink:"/cumulus-orca/docs/developer/development-guide/code/postgres-tests",draft:!1,unlisted:!1,editUrl:"https://github.com/nasa/cumulus-orca/edit/develop/website/docs/developer/development-guide/code/postgres-tests.md",tags:[],version:"current",frontMatter:{id:"postgres-tests",title:"Postgres Tests",description:"Instructions on running 'postgres' tests."},sidebar:"dev_guide",previous:{title:"Integration Tests",permalink:"/cumulus-orca/docs/developer/development-guide/code/integration-tests"},next:{title:"ORCA Logs",permalink:"/cumulus-orca/docs/developer/development-guide/code/orca-logging"}},c={},a=[{value:"Preparing to Run Postgres Tests",id:"preparing-to-run-postgres-tests",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.admonition,{type:"tip",children:(0,n.jsxs)(s.p,{children:["Run through the steps in ",(0,n.jsx)(s.a,{href:"/cumulus-orca/docs/developer/development-guide/code/setup-dev-env",children:"Setting Up a Dev Environment"})," prior to modifying/testing code."]})}),"\n",(0,n.jsx)(s.h2,{id:"preparing-to-run-postgres-tests",children:"Preparing to Run Postgres Tests"}),"\n",(0,n.jsx)(s.p,{children:"Test files ending in '_postgres.py' require a postgres database to be accessible."}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Make sure you have Docker running on your machine."}),"\n",(0,n.jsxs)(s.li,{children:["Open a command prompt and run","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-commandline",children:"docker run -it --rm --name some-postgres -v [path to repository]/database/ddl/base:/docker-entrypoint-initdb.d/ -p 5432:5432 -e POSTGRES_PASSWORD=[your db password here] postgres\n"})}),"\n"]}),"\n",(0,n.jsx)(s.li,{children:"The running database can now be accessed at localhost:5432"}),"\n",(0,n.jsxs)(s.li,{children:["Use the username 'postgres', and your new db password to access the db, and set the password for 'druser'.","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-commandline",children:"docker run -it --rm --network host -e POSTGRES_PASSWORD=[your user password here] postgres psql -h localhost -U postgres`\n"})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["Place a file called 'private_config.json' in the postgres' test folder and give it the information for your database.","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{"DATABASE_HOST": "localhost",\n"DATABASE_PORT": "5432",\n"DATABASE_NAME": "orca",\n"DATABASE_USER": "druser",\n"DATABASE_PW": "[your user password here]",\n"MASTER_USER_PW": "[your db password here]"}\n'})}),"\n","These values will be injected into your environment variables before the test is run."]}),"\n",(0,n.jsxs)(s.li,{children:["You may now run postgres tests the same way you would ",(0,n.jsx)(s.a,{href:"unit-tests",children:"unit tests"}),"."]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>d});var n=t(6540);const o={},r=n.createContext(o);function i(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);