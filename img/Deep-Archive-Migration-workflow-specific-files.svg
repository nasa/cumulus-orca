<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="961px" preserveAspectRatio="none" style="width:2526px;height:961px;background:#FFFFFF;" version="1.1" viewBox="0 0 2526 961" width="2526px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="365" x="1079.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="355" x="1084.75" y="27.9951">Deep Archive Collection Migration Workflow</text><rect fill="#FFFFFF" height="727.4531" style="stroke:#181818;stroke-width:1.0;" width="10" x="162" y="128.5938"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="675" y="149.7266"/><rect fill="#FFFFFF" height="174.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="852" y="207.9922"/><rect fill="#FFFFFF" height="312.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="1223" y="237.125"/><rect fill="#FFFFFF" height="195.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="1341" y="324.5234"/><rect fill="#FFFFFF" height="409.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="1777" y="462.1875"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="2261" y="602.8516"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2427.5" y="791.7813"/><rect height="199.0625" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2335.5" x="9" y="564.5859"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="167" x2="167" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="680" x2="680" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="856.5" x2="856.5" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1228" x2="1228" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1346" x2="1346" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1781.5" x2="1781.5" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2125.5" x2="2125.5" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2265.5" x2="2265.5" y1="118.5938" y2="881.0469"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2432.5" x2="2432.5" y1="118.5938" y2="881.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="132" y="115.292">operator</text><ellipse cx="167" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M167,58.7969 L167,85.7969 M154,66.7969 L180,66.7969 M167,85.7969 L154,100.7969 M167,85.7969 L180,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="132" y="893.042">operator</text><ellipse cx="167" cy="904.8438" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M167,912.8438 L167,939.8438 M154,920.8438 L180,920.8438 M167,939.8438 L154,954.8438 M167,939.8438 L180,954.8438 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="613" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="620" y="107.292">Cumulus Console</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="613" y="880.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="620" y="900.042">Cumulus Console</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="780.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="787.5" y="107.292">Migration Recovery</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="780.5" y="880.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="787.5" y="900.042">Migration Recovery</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1175" y="115.292">ORCA Catalog</text><path d="M1210,66.2969 C1210,56.2969 1228,56.2969 1228,56.2969 C1228,56.2969 1246,56.2969 1246,66.2969 L1246,92.2969 C1246,102.2969 1228,102.2969 1228,102.2969 C1228,102.2969 1210,102.2969 1210,92.2969 L1210,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1210,66.2969 C1210,76.2969 1228,76.2969 1228,76.2969 C1228,76.2969 1246,76.2969 1246,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1175" y="893.042">ORCA Catalog</text><path d="M1210,906.3438 C1210,896.3438 1228,896.3438 1228,896.3438 C1228,896.3438 1246,896.3438 1246,906.3438 L1246,932.3438 C1246,942.3438 1228,942.3438 1228,942.3438 C1228,942.3438 1210,942.3438 1210,932.3438 L1210,906.3438 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1210,906.3438 C1210,916.3438 1228,916.3438 1228,916.3438 C1228,916.3438 1246,916.3438 1246,906.3438 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="1291" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1298" y="107.292">ORCA Bucket</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="1291" y="880.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1298" y="900.042">ORCA Bucket</text><path d="M1718.5,92.2969 L1845.5,92.2969 C1850.5,92.2969 1850.5,105.4453 1850.5,105.4453 C1850.5,105.4453 1850.5,118.5938 1845.5,118.5938 L1718.5,118.5938 C1713.5,118.5938 1713.5,105.4453 1713.5,105.4453 C1713.5,105.4453 1713.5,92.2969 1718.5,92.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1845.5,92.2969 C1840.5,92.2969 1840.5,105.4453 1840.5,105.4453 C1840.5,118.5938 1845.5,118.5938 1845.5,118.5938 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1718.5" y="110.292">Migration Queue</text><path d="M1718.5,880.0469 L1845.5,880.0469 C1850.5,880.0469 1850.5,893.1953 1850.5,893.1953 C1850.5,893.1953 1850.5,906.3438 1845.5,906.3438 L1718.5,906.3438 C1713.5,906.3438 1713.5,893.1953 1713.5,893.1953 C1713.5,893.1953 1713.5,880.0469 1718.5,880.0469 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1845.5,880.0469 C1840.5,880.0469 1840.5,893.1953 1840.5,893.1953 C1840.5,906.3438 1845.5,906.3438 1845.5,906.3438 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1718.5" y="898.042">Migration Queue</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="2064.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="2071.5" y="107.292">Migration Copy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="2064.5" y="880.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="2071.5" y="900.042">Migration Copy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="2197.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="2204.5" y="107.292">Migration Report</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="2197.5" y="880.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="2204.5" y="900.042">Migration Report</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="2344.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="2351.5" y="107.292">Internal Reconciliation</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="2344.5" y="880.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="2351.5" y="900.042">Internal Reconciliation</text><rect fill="#FFFFFF" height="727.4531" style="stroke:#181818;stroke-width:1.0;" width="10" x="162" y="128.5938"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="675" y="149.7266"/><rect fill="#FFFFFF" height="174.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="852" y="207.9922"/><rect fill="#FFFFFF" height="312.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="1223" y="237.125"/><rect fill="#FFFFFF" height="195.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="1341" y="324.5234"/><rect fill="#FFFFFF" height="409.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="1777" y="462.1875"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="2261" y="602.8516"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2427.5" y="791.7813"/><polygon fill="#008000" points="663,145.7266,673,149.7266,663,153.7266,667,149.7266" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="669" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="179" y="144.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="192" y="144.6606">Configure ORCA for Deep Archive in the collection</text><polygon fill="#008000" points="663,174.8594,673,178.8594,663,182.8594,667,178.8594" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="669" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="179" y="173.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="192" y="173.7935">End user initiating migration</text><polygon fill="#008000" points="840,203.9922,850,207.9922,840,211.9922,844,207.9922" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="680" x2="846" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="687" y="202.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="699" y="202.9263">Calls with collectionId</text><polygon fill="#008000" points="1211,233.125,1221,237.125,1211,241.125,1215,237.125" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="862" x2="1217" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="869" y="232.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="882" y="232.0591">Queries for all the files related to collectionId</text><polygon fill="#FF0000" points="873,262.2578,863,266.2578,873,270.2578,869,266.2578" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="867" x2="1222" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="879" y="261.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="892" y="261.1919">Returns all the relevant files</text><polygon fill="#008000" points="1211,291.3906,1221,295.3906,1211,299.3906,1215,295.3906" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="862" x2="1217" y1="295.3906" y2="295.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="869" y="290.3247">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="324" x="882" y="290.3247">Creates migration job records with pending status.</text><polygon fill="#008000" points="1329,320.5234,1339,324.5234,1329,328.5234,1333,324.5234" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="862" x2="1335" y1="324.5234" y2="324.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="869" y="319.4575">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="882" y="319.4575">Performs bulk retrieval for the files</text><polygon fill="#FF0000" points="873,349.6563,863,353.6563,873,357.6563,869,353.6563" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="867" x2="1340" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="879" y="348.5903">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="892" y="348.5903">Retrieval status sent</text><polygon fill="#008000" points="1211,378.7891,1221,382.7891,1211,386.7891,1215,382.7891" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="857" x2="1217" y1="382.7891" y2="382.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="864" y="377.7231">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="877" y="377.7231">Updates the migration job status</text><path d="M1277,395.7891 L1277,435.7891 L1414,435.7891 L1414,405.7891 L1404,395.7891 L1277,395.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1404,395.7891 L1404,405.7891 L1414,405.7891 L1404,395.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="1283" y="412.856">Bulk recovery</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1283" y="427.9888">takes 12-24 hours</text><polygon fill="#008000" points="1765,458.1875,1775,462.1875,1765,466.1875,1769,462.1875" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="1351" x2="1771" y1="462.1875" y2="462.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1358" y="457.1216">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384" x="1381" y="457.1216">Notify message that files have been restored sent to queue</text><polygon fill="#008000" points="1798,487.3203,1788,491.3203,1798,495.3203,1794,491.3203" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="1792" x2="2125" y1="491.3203" y2="491.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1804" y="486.2544">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="1826" y="486.2544">Read messages that files have been restored</text><polygon fill="#FF0000" points="1357,516.4531,1347,520.4531,1357,524.4531,1353,520.4531" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="1351" x2="2125" y1="520.4531" y2="520.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1363" y="515.3872">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1385" y="515.3872">Copies files to Deep Archive storage</text><polygon fill="#FF0000" points="1239,545.5859,1229,549.5859,1239,553.5859,1235,549.5859" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="1233" x2="2125" y1="549.5859" y2="549.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1245" y="544.52">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421" x="1266" y="544.52">Update the file storage type and migration status in the database</text><path d="M9,564.5859 L87,564.5859 L87,571.7188 L77,581.7188 L9,581.7188 L9,564.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="199.0625" style="stroke:#000000;stroke-width:1.5;" width="2335.5" x="9" y="564.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="24" y="577.6528">loop</text><polygon fill="#008000" points="2249,598.8516,2259,602.8516,2249,606.8516,2253,602.8516" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="2255" y1="602.8516" y2="602.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="179" y="597.7856">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="201" y="597.7856">Requests migration job status by passing jobId</text><polygon fill="#008000" points="1239,627.9844,1229,631.9844,1239,635.9844,1235,631.9844" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="1233" x2="2260" y1="631.9844" y2="631.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1245" y="626.9185">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1267" y="626.9185">Queries for the jobid</text><polygon fill="#FF0000" points="2249,657.1172,2259,661.1172,2249,665.1172,2253,661.1172" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="1228" x2="2255" y1="661.1172" y2="661.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1235" y="656.0513">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="1257" y="656.0513">Returns information relevant to the jobid</text><polygon fill="#FF0000" points="183,686.25,173,690.25,183,694.25,179,690.25" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="177" x2="2265" y1="690.25" y2="690.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="189" y="685.1841">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="211" y="685.1841">Returns migration job information</text><path d="M19,703.25 L19,758.25 L314,758.25 L314,713.25 L304,703.25 L19,703.25 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M304,703.25 L304,713.25 L314,713.25 L304,703.25 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="25" y="720.3169"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="25" y="735.4497"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="25" y="750.5825">Runs reports until job is in completed state</text><polygon fill="#008000" points="2415.5,787.7813,2425.5,791.7813,2415.5,795.7813,2419.5,791.7813" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="2421.5" y1="791.7813" y2="791.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="179" y="786.7153">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="201" y="786.7153">Requests internal reconciliation mismatch report</text><polygon fill="#FF0000" points="183,816.9141,173,820.9141,183,824.9141,179,820.9141" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="177" x2="2431.5" y1="820.9141" y2="820.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="189" y="815.8481">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="211" y="815.8481">Returns mismatch data based on storage type</text><line style="stroke:#FF0000;stroke-width:1.0;" x1="172" x2="214" y1="855.0469" y2="855.0469"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="214" x2="214" y1="855.0469" y2="868.0469"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="167" x2="214" y1="868.0469" y2="868.0469"/><polygon fill="#FF0000" points="177,864.0469,167,868.0469,177,872.0469,173,868.0469" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="179" y="849.981">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="466" x="202" y="849.981">Analyzes mismatch reports for storage discrepencies and resolves them</text><!--MD5=[44fe8dfd039b70b24e20c129c47c0218]
@startuml
title "Deep Archive Collection Migration Workflow"

actor operator
participant "Cumulus Console" as cc
participant "Migration Recovery" as ms
database "ORCA Catalog" as oc
participant "ORCA Bucket" as ob
queue "Migration Queue" as mq
participant "Migration Copy" as mc
participant "Migration Report" as mr
participant "Internal Reconciliation" as ir
autonumber

activate operator

operator -[#green]> cc: Configure ORCA for Deep Archive in the collection
activate cc
operator -[#green]> cc: End user initiating migration
cc-[#green]> ms: Calls with collectionId
deactivate cc

activate ms


ms-[#green]> oc: Queries for all the files related to collectionId
activate oc
oc-[#red]>ms: Returns all the relevant files

ms -[#green]> oc: Creates migration job records with pending status.

ms-[#green]> ob: Performs bulk retrieval for the files
activate ob
ob -[#red]> ms: Retrieval status sent

ms -[#green]> oc: Updates the migration job status

deactivate ms
note over ob
Bulk recovery 
takes 12-24 hours
end note

ob-[#green]> mq: Notify message that files have been restored sent to queue


activate mq
mc-[#green]> mq: Read messages that files have been restored

mc -[#red]> ob: Copies files to Deep Archive storage

deactivate ob
mc-[#red]> oc: Update the file storage type and migration status in the database
deactivate oc
loop

operator -[#green]> mr: Requests migration job status by passing jobId
activate mr
mr -[#green]> oc: Queries for the jobid
oc -[#red]> mr: Returns information relevant to the jobid



mr -[#red]> operator: Returns migration job information
deactivate mr
note over operator


Runs reports until job is in completed state
end note
end

operator-[#green]> ir: Requests internal reconciliation mismatch report
activate ir
ir-[#red]> operator: Returns mismatch data based on storage type
deactivate ir
operator -[#red]> operator: Analyzes mismatch reports for storage discrepencies and resolves them


'
deactivate operator
@enduml

@startuml
title "Deep Archive Collection Migration Workflow"

actor operator
participant "Cumulus Console" as cc
participant "Migration Recovery" as ms
database "ORCA Catalog" as oc
participant "ORCA Bucket" as ob
queue "Migration Queue" as mq
participant "Migration Copy" as mc
participant "Migration Report" as mr
participant "Internal Reconciliation" as ir
autonumber

activate operator

operator -[#green]> cc: Configure ORCA for Deep Archive in the collection
activate cc
operator -[#green]> cc: End user initiating migration
cc-[#green]> ms: Calls with collectionId
deactivate cc

activate ms


ms-[#green]> oc: Queries for all the files related to collectionId
activate oc
oc-[#red]>ms: Returns all the relevant files

ms -[#green]> oc: Creates migration job records with pending status.

ms-[#green]> ob: Performs bulk retrieval for the files
activate ob
ob -[#red]> ms: Retrieval status sent

ms -[#green]> oc: Updates the migration job status

deactivate ms
note over ob
Bulk recovery 
takes 12-24 hours
end note

ob-[#green]> mq: Notify message that files have been restored sent to queue


activate mq
mc-[#green]> mq: Read messages that files have been restored

mc -[#red]> ob: Copies files to Deep Archive storage

deactivate ob
mc-[#red]> oc: Update the file storage type and migration status in the database
deactivate oc
loop

operator -[#green]> mr: Requests migration job status by passing jobId
activate mr
mr -[#green]> oc: Queries for the jobid
oc -[#red]> mr: Returns information relevant to the jobid



mr -[#red]> operator: Returns migration job information
deactivate mr
note over operator


Runs reports until job is in completed state
end note
end

operator-[#green]> ir: Requests internal reconciliation mismatch report
activate ir
ir-[#red]> operator: Returns mismatch data based on storage type
deactivate ir
operator -[#red]> operator: Analyzes mismatch reports for storage discrepencies and resolves them


deactivate operator
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>